<html>

<head>
 <link rel="stylesheet" type="text/css" href="racetrack.css">

</head>

  <div class='noselect' id='hamburger' style='position: absolute; top: 2vh; left: 2vh; border: 2px solid transparent;'>
   <div class='noselect' id='pink_dot' style='border-radius: 50%; width: 20px; height: 20px; background-color: #fcf; cursor: pointer; display:inline-block; vertical-align: top; margin: 5px;'></div>
   <div class='noselect' id='lines-container' style='display: none; vertical-align: top;'>
   
    <div class='table' id='checkbox-table'>
     <div class='row' >
      <div class='cell' style='text-align:left;'>
       <div class='inner'> time span  </div>
      </div>
      <div class='cell' style='text-align: left;'>
       <div class='inner'> grid lines  </div>
      </div>
      <div class='cell' style='text-align: left;'>
       <div class='inner'> header row order </div>
      </div>
     </div>
     <div class='row'>
      <div class='cell' style='text-align: left;'>
       <div class='inner'> by month  </div>
      </div>
      <div class='cell'>
       <input type='checkbox' id='by_month' />
      </div>
      <div class='cell'>
       <input type='checkbox' id='by_month_header' />
      </div>
     </div>
      <div class='row'>
        <div class='cell' style='text-align: left;'>
          <div class='inner'> by week  </div>
        </div>
        <div class='cell'>
          <input type='checkbox' id='by_week' />
        </div>
      <div class='cell'>
       <input type='checkbox' id='by_week_header' checked />
      </div>
      </div>
   </div>
   
  </div>
  </div>

   </div>
  </div>

  <script>
  
   window.onload = function() {
    let pink_dot = document.getElementById('pink_dot');
    let hamburger = document.getElementById('hamburger');
    pink_dot.addEventListener('click', function() {
     console.log(this);
     let x = document.getElementById('lines-container');
     
     if (x.style.display === 'none') {
      x.style.display = 'inline-block';
      hamburger.style.borderTop = '2px solid #fcf';
     } else {
      x.style.display = 'none';
      hamburger.style.border = '2px solid transparent';
     }
    });
    
    let checkbox_month = document.getElementById('by_month');
    let checkbox_week = document.getElementById('by_week');
    
    checkbox_month.addEventListener('click', function() {
      if (this.checked) {
        addMonthLines('#999');
      } else {
        addMonthLines('transparent');
      }
      
      if (checkbox_week.checked) {
       addWeekLines('#999');
      }
      
    });
    checkbox_week.addEventListener('click', function() {
      if (this.checked) {
        addWeekLines('#999');
      } else {
        addWeekLines('transparent');
      }
      if (checkbox_month.checked) {
       addMonthLines('#999');
      }
    });
   
   let by_month_header = document.getElementById('by_month_header');
   let by_week_header = document.getElementById('by_week_header');
   
    by_month_header.addEventListener('click', function() {
      swapHeaderRows();
      if (this.checked) {
        by_week_header.checked = false;
      } else {
        by_week_header.checked = true;
      }
      
    });
    by_week_header.addEventListener('click', function() {
      swapHeaderRows();
      if (this.checked) {
        by_month_header.checked = false;
      } else {
        by_month_header.checked = true;
      }
      
    });
  
   } // closing window.onload
   
   
   function swapHeaderRows() {
    let racetrack = document.getElementById('racetrack');
    let header0 = racetrack.children[0];
    let header1 = racetrack.children[1];
    console.log(header0);
    console.log(header1);
    racetrack.insertBefore(header1, header0);
   }
   
   
 </script>

  <div style='display: table; height: 100%; width: 100%;'>
   <div style='display: table-cell; vertical-align: middle;'>
    <h2 id='page-header' class='noselect'> a racetrack </h2>
    <div id='main' style='margin: 0 auto;'></div>
   </div>
  </div>


<script src='racetrack.js'></script>

<script>

let data = fetch('racetrack.json?x=' + Math.random()).then(r => r.json()).then(arr => {

 //console.log(arr);
 
 let racetrack = createTable(arr, "activity_no", "day_abs", "cycle_no", 1, 2);
 let main = document.getElementById('main');
 main.appendChild(racetrack.table);

 addMonthLines('transparent');
 addWeekLines('transparent');

});




</script>
</html>